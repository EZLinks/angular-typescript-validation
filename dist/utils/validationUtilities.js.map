{"version":3,"sources":["utils/validationUtilities.ts"],"names":[],"mappings":";AAAA,mBAAiB;AAMjB;;GAEG;AACH;IAAA;IAsDA,CAAC;IApDG;;;;OAIG;IACW,iCAAa,GAA3B,UAA4B,KAAgB;QAExC,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAEjC,IAAI,SAAS,GAAQ,KAAK,CAAC,QAAQ,CAAC,CAAC;gBACrC,IAAI,YAAY,GAAY,SAAS,IAA6B,SAAU,CAAC,eAAe,KAAK,SAAS;uBAC1E,SAAU,CAAC,IAAI,KAAK,SAAS,CAAC;gBAE9D,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oBACf,MAAM,CAAC,SAAS,CAAC;gBACrB,CAAC;YACL,CAAC;QACL,CAAC;QAED,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;IACzD,CAAC;IAED;;OAEG;IACW,0BAAM,GAApB,UAAqB,MAAgB;QAEjC,EAAE,CAAC,CAAoB,MAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACrD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACW,kCAAc,GAA5B,UAAgC,IAAsB;QAElD,IAAI,YAAY,GAAW,IAAI,MAAM,CAAC,cAAc,CAAC,CAAC;QACtD,IAAI,CAAC,GAAoB,YAAY,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;QAEtD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,KAAK,GAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC;QACL,CAAC;QAED,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;IACjE,CAAC;IACL,0BAAC;AAAD,CAtDA,AAsDC,IAAA;AAtDY,kDAAmB","file":"validationUtilities.js","sourcesContent":["import 'angular';\n\nimport { ValidatableController } from '../controllers/validatableController';\nimport { IMessage } from '../interfaces/message';\nimport { IValidationRule } from '../interfaces/validationRule';\n\n/**\n * base methods for validation purposes.\n */\nexport class ValidationUtilities {\n\n    /**\n     * tries to find controller in scope\n     * \n     * @param scope\n     */\n    public static getController(scope: ng.IScope): ValidatableController {\n\n        for (var property in scope) {\n            if (scope.hasOwnProperty(property)) {\n\n                let candidate: any = scope[property];\n                let isController: boolean = candidate && (<ValidatableController> candidate).rulesCustomizer !== undefined\n                    && (<ValidatableController> candidate).form !== undefined;\n\n                if (isController) {\n                    return candidate;\n                }\n            }\n        }\n\n        throw new Error('Cannot find controller candidate.');\n    }\n\n    /**\n     * checks if object is rule.\n     */\n    public static IsRule(object: IMessage): boolean {\n\n        if ((<IValidationRule> object).attribute !== undefined) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * gets property name from expression.\n     */\n    public static fromExpression<T>(func: (obj: T) => void): string {\n\n        let varExtractor: RegExp = new RegExp('return (.*);');\n        let m: RegExpExecArray = varExtractor.exec(func + '');\n\n        if (m && m.length === 2) {\n            let parts: Array<string> = m[1].split('.');\n            if (parts.length === 2) {\n                return parts[1];\n            }\n        }\n\n        throw new Error('Cannot get property name from expression.');\n    }\n}"]}