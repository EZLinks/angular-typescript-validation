{"version":3,"sources":["utils/errorProcessor.ts"],"names":[],"mappings":"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","file":"errorProcessor.js","sourcesContent":["import 'angular';\n\nimport { ServerError } from '../models/serverError';\n\n/**\n * global methods for error processing.\n */\nexport class ErrorProcessor {\n\n    private static validationAttr: string = 'validationAttrs';\n    private static serverValidationAttr: string = 'serverValidation';\n    private static serverErrorsAttr: string = 'serverErrors';\n\n    /**\n    * sets/unsets error message\n    * \n    * @param isError\n    * @param fieldName\n    * @param ruleAttribute\n    */\n    public static setFieldError(fieldName: string, ruleAttribute: string, form: ng.IFormController): void {\n\n        form.$setValidity(fieldName, false, form);\n\n        if (!form.$error[fieldName][this.validationAttr]) {\n            form.$error[fieldName][this.validationAttr] = {};\n        }\n\n        form.$error[fieldName][this.validationAttr][ruleAttribute] = true;\n    }\n\n    /**\n     * adds the server error related to the field.\n     */\n    public static addServerFieldError(fieldName: string, errorMessage: string, form: ng.IFormController): void {\n\n        this.setFieldError(fieldName, this.serverValidationAttr, form);\n\n        if (!form.$error[fieldName][this.serverErrorsAttr]) {\n            form.$error[fieldName][this.serverErrorsAttr] = [];\n        }\n\n        form.$error[fieldName][this.serverErrorsAttr].push(new ServerError(errorMessage));\n    }\n\n    /**\n     *  clears all errors for field.\n     */\n    public static clearFieldErrors(fieldName: string, form: ng.IFormController): void {\n\n        form.$setValidity(fieldName, true, form);\n\n        if (form.$error && form.$error[fieldName]) {\n            form.$error[fieldName][this.validationAttr] = {};\n            form.$error[fieldName][this.serverErrorsAttr] = [];\n        }\n    }\n\n    /**\n    * clears all validation errors.\n    */\n    public static clearAllFormErrors(form: ng.IFormController): void {\n\n        for (var attr in form.$error) {\n            if (form.$error.hasOwnProperty(attr)) {\n\n                this.clearFieldErrors(attr, form);\n            }\n        }\n    }\n\n    /**\n    * checks if rule has error.\n    */\n    public static ruleHasError(fieldName: string, attribute: string, form: ng.IFormController): boolean {\n\n        if (!this.checkAttrs(fieldName, form, this.validationAttr)) {\n            return false;\n        }\n\n        return form.$error[fieldName].validationAttrs[attribute] === true;\n    }\n\n    /**\n     * returns the server errors for field\n     */\n    public static getFieldServerErrors(fieldName: string, form: ng.IFormController): ServerError[] {\n\n        let result: ServerError[] = [];\n\n        if (this.checkAttrs(fieldName, form, this.serverErrorsAttr)) {\n            result = form.$error[fieldName][this.serverErrorsAttr];\n        }\n\n        return result;\n    }\n\n    /**\n     * checks if field is valid.\n     */\n    public static isFieldValid(fieldName: string, form: ng.IFormController): boolean {\n\n        let isValid: boolean = true;\n\n        if (!form || !form.$error) {\n            return true;\n        }\n\n        for (var attr in form.$error) {\n            if (form.$error.hasOwnProperty(attr) && attr === fieldName) {\n\n                isValid = false;\n                break;\n            }\n        }\n\n        return isValid;\n    }\n\n    /**\n     * checks attrs for existance.\n     */\n    public static checkAttrs(fieldName: string, form: ng.IFormController, attr: string): boolean {\n\n        if (!form.$error || !form.$error[fieldName] || !form.$error[fieldName][attr]) {\n            return false;\n        }\n\n        return true;\n    }\n}"]}