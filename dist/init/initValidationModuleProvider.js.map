{"version":3,"sources":["init/initValidationModuleProvider.ts"],"names":[],"mappings":";;AAAA,mBAAiB;AAEjB,+DAA8D;AAG9D;;GAEG;AACH;IAAA;IA4EA,CAAC;IA1EG;;OAEG;IACW,iCAAI,GAAlB,UAAmB,MAAyB;QAExC,qBAAqB;QACrB,IAAI,CAAC,aAAa,GAAG,IAAI,mCAAgB,EAAE,CAAC;QAE5C,IAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,UAAC,OAAgB,EAAE,OAAY,EAAE,SAAiB;YACrF,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACrH,CAAC,CAAC;QAEF,IAAI,CAAC,aAAa,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAC3D,IAAI,CAAC,aAAa,CAAC,mBAAmB,GAAG,IAAI,CAAC,0BAA0B,CAAC;QACzE,IAAI,CAAC,aAAa,CAAC,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAE9D,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YAET,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,mBAAmB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;YACrF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,cAAc,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;YAC3E,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,oBAAoB,EAAE,MAAM,CAAC,kBAAkB,CAAC,CAAC;YACvF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,qBAAqB,EAAE,MAAM,CAAC,mBAAmB,CAAC,CAAC;QAC7F,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAID;;OAEG;IACY,yCAAY,GAA3B,UAA4B,GAAW,EAAE,SAAiB,EAAE,KAAU;QAElE,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;YACtB,GAAG,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;QAC3B,CAAC;IACL,CAAC;IAKD,sBAAmB,gDAAgB;QAHnC;;WAEG;aACH;YACI,MAAM,CAAC,GAAG,CAAC;QACf,CAAC;;;OAAA;IAKD,sBAAmB,mDAAmB;QAHtC;;WAEG;aACH;YACI,MAAM,CAAC,uTAIQ,CAAC;QACpB,CAAC;;;OAAA;IAKD,sBAAmB,0DAA0B;QAH7C;;WAEG;aACH;YACI,MAAM,CAAC,sSAIQ,CAAC;QACpB,CAAC;;;OAAA;IAKD,sBAAkB,sCAAM;QAHxB;;WAEG;aACH;YACI,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;;;OAAA;IA9Cc,0CAAa,GAAqB,4BAA4B,CAAC,IAAI,EAAE,CAAC;IA+CzF,mCAAC;CA5ED,AA4EC,IAAA;AA5EY,oEAA4B","file":"initValidationModuleProvider.js","sourcesContent":["import 'angular';\r\n\r\nimport { ValidationConfig } from '../config/validationConfig';\r\ndeclare const $: any;\r\n\r\n/**\r\n * for module init purposes.\r\n */\r\nexport class InitValidationModuleProvider {\r\n    \r\n    /**\r\n     * inits validation module.\r\n     */\r\n    public static init(config?: ValidationConfig): ValidationConfig {\r\n\r\n        // init configuration\r\n        this.configuration = new ValidationConfig();\r\n\r\n        this.configuration.fieldErrorHandler = (isError: boolean, element: any, fieldName: string) => {\r\n            $(element.parents('form').find('[name=\"' + fieldName + '\"]').parents('.field')[0]).toggleClass('error', isError);\r\n        };\r\n\r\n        this.configuration.templateHtml = this.defaultTemplateHtml;\r\n        this.configuration.summaryTemplateHtml = this.defaultSummaryTemplateHtml;\r\n        this.configuration.validationTimoutMs = this.defaultTimeoutMs;\r\n\r\n        if (config) {\r\n\r\n            this.setIfDefined(this.configuration, 'fieldErrorHandler', config.fieldErrorHandler);\r\n            this.setIfDefined(this.configuration, 'templateHtml', config.templateHtml);\r\n            this.setIfDefined(this.configuration, 'validationTimoutMs', config.validationTimoutMs);\r\n            this.setIfDefined(this.configuration, 'summaryTemplateHtml', config.summaryTemplateHtml);\r\n        }\r\n\r\n        return this.configuration;\r\n    }\r\n\r\n    private static configuration: ValidationConfig = InitValidationModuleProvider.init();\r\n\r\n    /**\r\n     * sets value to object if value is defined.\r\n     */\r\n    private static setIfDefined(obj: Object, fieldName: string, value: any): void {\r\n\r\n        if (value !== undefined) {\r\n            obj[fieldName] = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * default timeout validation.\r\n     */\r\n    private static get defaultTimeoutMs(): number {\r\n        return 700;\r\n    }\r\n\r\n    /**\r\n     * default messages template Html.\r\n     */\r\n    private static get defaultTemplateHtml(): string {\r\n        return `<div class=\"ui error message\" style=\"display: block;\" ng-show=\"vm.isFieldValid() === false\"> \r\n                <ul class=\"list\"> \r\n                <li ng-repeat=\"error in vm.errors()\" ng-show=\"vm.showError(error)\">{{ error.message | translate }}</li>\r\n                </ul>\r\n                </div>`;\r\n    }\r\n\r\n    /**\r\n     * default summary template Html.\r\n     */\r\n    private static get defaultSummaryTemplateHtml(): string {\r\n        return `<div ng-show=\"vs.hasErrors()\" style=\"display: block;\" class=\"ui error message\">\r\n                <ul class=\"list\">\r\n                <li ng-repeat=\"error in vs.errors\" ng-show=\"vs.showError(error)\">{{ error.message | translate }}</li>\r\n                </ul>\r\n                </div>`;                           \r\n    }\r\n\r\n    /**\r\n     * gets the config.\r\n     */\r\n    public static get config(): ValidationConfig {\r\n        return this.configuration;\r\n    }\r\n}"]}